<!-- app/views/repairs/_repair.html.erb -->
<div id="repair_<%= repair.id %>">
  <% if repair.locked? %>
    <p>
      This repair is locked by <%= repair.locked_by %> at <%= repair.locked_at %>.
      <% if repair.locked_by?(current_user.email_address) %>
        <%= button_to 'Unlock', unlock_repair_path(repair), method: :post, form: { data: { turbo_stream: true } } %>
      <% end %>
    </p>
  <% else %>
    <p>
      This repair is unlocked.
      <%= button_to 'Lock for Editing', lock_repair_path(repair), method: :post, form: { data: { turbo_stream: true } } %>
    </p>
  <% end %>
</div>